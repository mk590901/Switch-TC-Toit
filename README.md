# Switch-TC-Toit

The application tests threaded code generated by the editor of hierarchical state machines. The original scheme can be seen on the __switch_reset.svg__ attached to the project. It's model of a switch affected by two events: __TURN__ and __RESET__. The first switches two states __ON__ and __OFF__, the second resets the state machine to the __OFF__ state regardless of what state it was in before.

## Precondition

The editor's __Planner__ module was supplemented with __toit__ code generator, which automatically create the __switch_reset_helper.toit__ file with __Switch_resetHelper__ and __Switch_resetComposer__ classes inside. Unlike previously used programming languages, class __Switch_resetHelper__ does not contain transfer functions, because Toit doesn't have the ability to statically initialize vectors containing class functions (methods). Therefore, class __Switch_resetComposer__ was created in which vectors of __Î»-functions__ are created dynamically on demand via the __compose__ method.. Class __Switch_resetHelper__ contains function __createHelper__ builds __QHsmHelper__ class for processing these functions. A core has also been added to the application, which services the launch of threaded code and the impact of events on it. This is a set of several very simple classes placed to the __tc_core.toit__ file: __EventWrapper__, which describes and keep an event, __QHsmHelper__ which contains a container of threaded codes and ensures its execution under the influence of events, __ThreadedCodeExecutor__ - a class ensures the launch of threaded code for a specific state and event.

